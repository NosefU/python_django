{% extends 'base_container.html' %}
{% block content %}
{% load tz %}

    <div class="row content-container col-10 offset-md-1">

        {% for object in object_list %}
            {#   карточка   #}
            <div class="d-flex align-items-start profile-feed-item">

                {#   аватар   #}
                <a href="{% url 'user_profile_detail' object.author.id %}">
                    <img src="{{ object.author.profile.avatar.url }}" alt="profile" class="img-sm rounded-circle">
                </a>

                {#   запись   #}
                <div class="ms-4">

                    {#   заголовок #}
                    {% if object.title %}
                        <a href="{% url 'record_page' object.id %}">
                            <h4>{{ object.title }}</h4>
                        </a>
                    {% endif %}

                    {# юзернейм и дата публикации #}
                    <h6>
                        <a href="{% url 'user_profile_detail' object.author.id %}">{{ object.author.username }}</a>
                        <small class="ms-3 text-muted">{{ object.created|timezone:"Europe/Moscow" }}</small>
                    </h6>

                    {#   обрезанный текст поста   #}
                    <p>
                        {{ object.body|linebreaksbr|truncatechars:400 }}
                        <br>
                        <a href="{% url 'record_page' object.id %}" class="btn btn-outline-primary mt-2">Читать дальше →</a>
                    </p>

                    {#   первая картинка (если есть)   #}
                    {% if object.images.first %}
                        <div class="thumb-post">
                        <img src="{{ object.images.first.image.url }}" alt="КДПВ" class="rounded-3">
                        </div>
                    {% endif %}

                </div>
            </div>
    {% endfor %}
</div>

{% endblock content %}

